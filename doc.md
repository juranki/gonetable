<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# gonetable

```go
import "github.com/juranki/gonetable"
```

GoneTable provides utilities to work with single/one table design with go.

For more information about single table design see https://youtu.be/HaEPXoXVf2k

## Index

- [Variables](<#variables>)
- [func JoinKeySegments(segments []string) (string, error)](<#func-joinkeysegments>)
- [type CompositeKey](<#type-compositekey>)
- [type Document](<#type-document>)
- [type Schema](<#type-schema>)
  - [func NewSchema(docSamples []Document) (*Schema, error)](<#func-newschema>)
  - [func (s *Schema) AttributeDefinitions() []types.AttributeDefinition](<#func-schema-attributedefinitions>)
  - [func (s *Schema) GlobalSecondaryIndexes() []types.GlobalSecondaryIndex](<#func-schema-globalsecondaryindexes>)
  - [func (s *Schema) KeySchema() []types.KeySchemaElement](<#func-schema-keyschema>)


## Variables

```go
var (
    ErrKeyDelimiter  = errors.New("key delimiter used in key segment")
    ErrKeyNoSegments = errors.New("no key segments provided")
    KeyDelimiter     = "#"
)
```

```go
var (
    ErrNoDocSamples    = errors.New("at least one document sample required")
    ErrDuplicateTypeID = errors.New("multiple document samples with same type id")
    ErrIndexName       = errors.New("invalid index name, must match ^[a-zA-Z0-9_.-]{3,255}$")
)
```

## func [JoinKeySegments](<https://github.com/juranki/gonetable/blob/main/key.go#L19>)

```go
func JoinKeySegments(segments []string) (string, error)
```

## type [CompositeKey](<https://github.com/juranki/gonetable/blob/main/key.go#L14-L17>)

```go
type CompositeKey struct {
    HashSegments  []string
    RangeSegments []string
}
```

## type [Document](<https://github.com/juranki/gonetable/blob/main/document.go#L17-L20>)

Implement Document interface for the structs you want to store to the DDB table.

There are two required methods:

```
Gonetable_Key() returns the key that uniquely identifies the document.
Gonetable_TypeID() returns a string that specifies the type of the document.
```

TODO: Additionally you can specify other functions with Gonetable\_ \-prefix to specify additional indexes, and fields that are computed when document is saved:

```
Gonetable_[Indexname]Key() returns composite key for additional index
Gonetable_Computed[Fieldname]() returns value for a computed field
```

```go
type Document interface {
    Gonetable_Key() CompositeKey
    Gonetable_TypeID() string
}
```

## type [Schema](<https://github.com/juranki/gonetable/blob/main/schema.go#L22-L25>)

```go
type Schema struct {
    // contains filtered or unexported fields
}
```

<details><summary>Example</summary>
<p>

```go
package main

import (
	"context"
	"fmt"

	"github.com/aws/aws-sdk-go-v2/aws"
	"github.com/aws/aws-sdk-go-v2/service/dynamodb"
	"github.com/aws/aws-sdk-go-v2/service/dynamodb/types"
	"github.com/juranki/gonetable"
)

type ExampleDocument struct {
	ID   string
	Name string
}

func (ed *ExampleDocument) Gonetable_TypeID() string {
	return "ed"
}

func (ed *ExampleDocument) Gonetable_Key() gonetable.CompositeKey {
	return gonetable.CompositeKey{
		HashSegments:  []string{"ed", ed.ID},
		RangeSegments: []string{"ed"},
	}
}

func main() {
	cfg := MustLoadLocalDDBConfig()
	client := dynamodb.NewFromConfig(cfg)

	schema, err := gonetable.NewSchema([]gonetable.Document{
		&ExampleDocument{},
	})
	if err != nil {
		panic(err)
	}

	table, err := client.CreateTable(
		context.Background(),
		&dynamodb.CreateTableInput{
			TableName:              aws.String("ExampleTable"),
			BillingMode:            types.BillingModePayPerRequest,
			AttributeDefinitions:   schema.AttributeDefinitions(),
			KeySchema:              schema.KeySchema(),
			GlobalSecondaryIndexes: schema.GlobalSecondaryIndexes(),
		},
	)
	if err != nil {
		panic(err)
	}

	fmt.Println(*table.TableDescription.TableName)
}
```

#### Output

```
ExampleTable
```

</p>
</details>

### func [NewSchema](<https://github.com/juranki/gonetable/blob/main/schema.go#L27>)

```go
func NewSchema(docSamples []Document) (*Schema, error)
```

### func \(\*Schema\) [AttributeDefinitions](<https://github.com/juranki/gonetable/blob/main/schema.go#L64>)

```go
func (s *Schema) AttributeDefinitions() []types.AttributeDefinition
```

Returns attribute definitions for all partition and sort keys fields of the table and GSIs

### func \(\*Schema\) [GlobalSecondaryIndexes](<https://github.com/juranki/gonetable/blob/main/schema.go#L76>)

```go
func (s *Schema) GlobalSecondaryIndexes() []types.GlobalSecondaryIndex
```

Returns definitions for GSIs

### func \(\*Schema\) [KeySchema](<https://github.com/juranki/gonetable/blob/main/schema.go#L104>)

```go
func (s *Schema) KeySchema() []types.KeySchemaElement
```

Returns key schema that is always the same. Hash and range keys named PK and SK.



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
